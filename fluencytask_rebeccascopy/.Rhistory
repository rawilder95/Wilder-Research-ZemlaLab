i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials]
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials] <- 1
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item == repeated_words, both_trials] <- 1
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials] <- 1
this_trial$both_Trials
this_trial$both_rials
this_trial$both_trials
this_subj$both_trials
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials] <- 1
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials]
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials] <- this_subj$item %in% repeated_words
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials] <- this_subj$item %in% repeated_words
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
this_subj
item
this_subj$item %in% repeated_words
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i],] <- this_subj
dat[id==nsubj[i]]
this_subj
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := both_trials]
this_fun <- function(){
for (i in 1:(length(trial2$item)-1)){
if(sum(trial2[i]$rep_before== "TRUE",trial2[i+1]$rep_before== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
dat
both_trials
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
dat
set_reptrials <- function(i) {
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
}
i=1
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
set_reptrials(length(nsubj))
dat
nsubj
for (n in 1:length(nsubj)){
for (c in 1:length(unique(dat$category))){
this_subject <- dat[id== nsubj[n] & category== unique(dat$category)[c],]
}
}
this_subject
for (i in unique(dat$category)){
category <- i
}
for (i in unique(dat$category)){
return(category <- i)
}
for (i in unique(dat$category)){
i
}
i
for (i in unique(dat$category)){
return(i)
}
i
for (category in unique(dat$category)){
)
nsubj
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subject[id== subject & category== cats]
}
}
this_subject
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subject[id== subject & category== cats & listrank==2,]
}
}
this_subject
for (n in 1:length(nsubj)){
for (c in 1:length(unique(dat$category))){
trial2 <- dat[id== nsubj[n] & category== unique(dat$category)[c],]
}
}
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(length(trial2$item)-1)){
if(sum(trial2[i]$rep_before== "TRUE",trial2[i+1]$rep_before== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
old_old
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$rep_before== "TRUE",trial2[i+1]$rep_before== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$both_trials== "TRUE",trial2[i+1]$both_trials== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
snafu
dat
unique(dat$category)
category
cats
transition_probabilities <- data.table(id=character(), category=character(), pOldOld=numeric(), pOldNew=numeric(), pNewNew=numeric(), pNewOld=numeric())
5:43
newrow <- list(id="A101", category="fruits", pOldOld=.123, pOldNew=.5, pNewNew=.76, pNewOld=.3)
5:44
transition_probabilites <- rbind(transition_probabilities, newrow) (edited)
transition_probabilities
newrow
transition_probabilities <- data.table(id=character(), category=character(), pOldOld=numeric(), pOldNew=numeric(), pNewNew=numeric(), pNewOld=numeric())
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$both_trials== "TRUE",trial2[i+1]$both_trials== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
transition_probabilites <- rbind(transition_probabilities, newrow)
transition_probabilites
transition_probabilities <- data.table(id=character(), category=character(), pOldOld=numeric(), pOldNew=numeric(), pNewNew=numeric(), pNewOld=numeric())
transition_probabilites
transition_probabilites <- data.table()
transition_probabilites
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$both_trials== "TRUE",trial2[i+1]$both_trials== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
trial2
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
for (i in 1:(length(trial2$item)-1)){
if(sum(trial2[i]$rep_before== "TRUE",trial2[i+1]$rep_before== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
# if you need to clear this var
# transition_probabilites <- data.table()
transition_probabilities <- data.table(id=character(), category=character(), pOldOld=numeric(), pOldNew=numeric(), pNewNew=numeric(), pNewOld=numeric())
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$both_trials== "TRUE",trial2[i+1]$both_trials== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
trial2
this_subj
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
trial2
dat
trial2
dat[id== "A102"]
dat[is.nan(both_trials),]
dat[is.nan(both_trials),both_trials]
dat[is.na(both_trials),]
dat[!is.na(both_trials),]
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
dat
dat[is.na(both_trials)]
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
fsy
dat
set_reptrials <- function(i) {
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
}
#Now all trials have both trials
set_reptrials(length(nsubj))
dat
dat[is.na(both_trials)]
nsubj
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
dat[, both_trials := 0]
set_reptrials <- function(i) {
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
}
dat
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
dat[, both_trials := 0]
set_reptrials <- function(i) {
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials := this_subj$both_trials]
}
dat
dat[both_trials>1]
this_subj
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
dat[, both_trials := 0]
set_reptrials <- function(i) {
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i], both_trials] <- this_subj$both_trials
}
#Now all trials have both trials
set_reptrials(length(nsubj))
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
dat[, both_trials := 0]
set_reptrials <- function(i) {
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i]$both_trials <- this_subj$both_trials
}
dat<- dat[listrank<3,]
nsubj <- unique(dat$id)
trial2 <- dat[listrank==2]
# Set up everything for function
dat[, both_trials := 0]
set_reptrials <- function(i) {
this_subj <- dat[id==nsubj[i],]
repeated_words <- intersect(this_subj[listrank==2,item], this_subj[listrank==1,item])
this_subj[, both_trials:= 0]
this_subj[item %in% repeated_words, both_trials:=1]
dat[id==nsubj[i]]$both_trials <- this_subj$both_trials
}
#Now all trials have both trials
set_reptrials(length(nsubj))
dat
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subj <- dat[id== nsubj[subject] & category== cats,]
}
}
this_subj
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subj <- dat[id== nsubj[subject] & category== cats,]
}
}
cats
category
for (i in 1:(length(trial2$item)-1)){
if(sum(trial2[i]$rep_before== "TRUE",trial2[i+1]$rep_before== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
# if you need to clear this var
# transition_probabilites <- data.table()
transition_probabilities <- data.table(id=character(), category=character(), pOldOld=numeric(), pOldNew=numeric(), pNewNew=numeric(), pNewOld=numeric())
this_subj
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subj <- dat[id== subject & category== cats,]
}
}
this_subj
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subj <- dat[id== subject & category== cats,]
repeated_words <- intersect(this_subj[listrank==1,item], this_subj[listrank==2,item])
}
}
repeated_words
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subj <- dat[id== subject & category== cats,]
repeated_words <- intersect(this_subj[listrank==1,item], this_subj[listrank==2,item])
this_subj[item %in% repeated_words, both_trials:= 1]
this_subj[!item %in% repeated_words, both_trials:=0]
}
}
this_subj
this
this_subj
for (subject in nsubj){
for (cats in unique(dat$category)){
this_subj <- dat[id== subject & category== cats,]
repeated_words <- intersect(this_subj[listrank==1,item], this_subj[listrank==2,item])
this_subj[item %in% repeated_words, both_trials:= 1]
this_subj[!item %in% repeated_words, both_trials:=0]
dat[id== subject & category== cats, both_trials:= this_subj$both_trials]
}
}
this_subje
this_subj
dat
dat[is.na(both_trials)]
for (i in 1:(length(trial2$item)-1)){
if(sum(trial2[i]$rep_before== "TRUE",trial2[i+1]$rep_before== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
# if you need to clear this var
# transition_probabilites <- data.table()
transition_probabilities <- data.table(id=character(), category=character(), pOldOld=numeric(), pOldNew=numeric(), pNewNew=numeric(), pNewOld=numeric())
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$both_trials== "TRUE",trial2[i+1]$both_trials== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
old_old
trial2
trial2
sum(trial2$both_trials)
sum(trial2$both_trials)
both_trials
trial2
trial2$both_trials
numeric(trial2$both_trials)
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$both_trials== "TRUE",trial2[i+1]$both_trials== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
}
}
for (subject in nsubj){
for (cats in unique(dat$category)){
trial2 <- dat[id== subject & category== cats & listrank==2,]
for (i in 1:(nrow(trial2)-1)){
if(sum(trial2[i]$both_trials== "TRUE",trial2[i+1]$both_trials== "TRUE")>1){
old_old= old_old+1
}else{
old_old=old_old+0
}
}
old_old
}
}
old_old
